#include <string.h>
#include <stdio.h>

char *ppstr = "simp: #s(existential #s(var program 1) #s(conj #s(== (#s(var program 1)) #s(var #f 0)) #s(universal #s(var v 2) #s(disj #s(existential #s(var v.lhs 7) #s(existential #s(var accessors.rhs 8) #s(existential #s(var v.rhs 9) #s(existential #s(var e.then 10) #s(existential #s(var e.else 11) #s(conj #s(== (if (equal? (quote #s(var v.lhs 7)) (access . #s(var accessors.rhs 8))) #s(var e.then 10) #s(var e.else 11)) #s(var program 1)) #s(conj #s(=/= #s(var v.lhs 7) #s(var v.rhs 9)) #s(conj #s(disj #s(conj #s(== #s(var accessors.rhs 8) ()) #s(== #s(var v.rhs 9) #s(var v 2))) #s(existential #s(var accessor 12) #s(existential #s(var accessors.remaining 13) #s(existential #s(var input.next 14) #s(existential #s(var unused 15) #s(conj #s(conj #s(== #s(var accessors.rhs 8) (#s(var accessor 12) . #s(var accessors.remaining 13))) #s(disj #s(conj #s(== #s(var accessor 12) fst) #s(== #s(var v 2) (#s(var input.next 14) . #s(var unused 15)))) #s(conj #s(== #s(var accessor 12) snd) #s(== #s(var v 2) (#s(var unused 15) . #s(var input.next 14)))))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var input.next 14) #s(var accessors.remaining 13) #s(var v.rhs 9))))))))) #s(disj #s(== #s(var e.else 11) (quote 1)) #s(existential #s(var v.lhs 16) #s(existential #s(var accessors.rhs 17) #s(existential #s(var v.rhs 18) #s(existential #s(var e.then 19) #s(existential #s(var e.else 20) #s(conj #s(== #s(var e.else 11) (if (equal? (quote #s(var v.lhs 16)) (access . #s(var accessors.rhs 17))) #s(var e.then 19) #s(var e.else 20))) #s(disj #s(conj #s(conj #s(== #s(var v.lhs 16) #s(var v.rhs 18)) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var v 2) #s(var accessors.rhs 17) #s(var v.rhs 18)))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:program-evalo> program-evalo #s(var v 2) #s(var e.then 19) 1))) #s(conj #s(conj #s(=/= #s(var v.lhs 16) #s(var v.rhs 18)) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var v 2) #s(var accessors.rhs 17) #s(var v.rhs 18)))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:program-evalo> program-evalo #s(var v 2) #s(var e.else 20) 1))))))))))))))))))) #s(existential #s(var v.lhs 7) #s(existential #s(var accessors.rhs 8) #s(existential #s(var e.then 10) #s(conj #s(existential #s(var e.else 11) #s(== (if (equal? (quote #s(var v.lhs 7)) (access . #s(var accessors.rhs 8))) #s(var e.then 10) #s(var e.else 11)) #s(var program 1))) #s(conj #s(disj #s(conj #s(== #s(var accessors.rhs 8) ()) #s(== #s(var v.lhs 7) #s(var v 2))) #s(existential #s(var accessor 21) #s(existential #s(var accessors.remaining 22) #s(existential #s(var input.next 23) #s(existential #s(var unused 24) #s(conj #s(conj #s(== #s(var accessors.rhs 8) (#s(var accessor 21) . #s(var accessors.remaining 22))) #s(disj #s(conj #s(== #s(var accessor 21) fst) #s(== #s(var v 2) (#s(var input.next 23) . #s(var unused 24)))) #s(conj #s(== #s(var accessor 21) snd) #s(== #s(var v 2) (#s(var unused 24) . #s(var input.next 23)))))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var input.next 23) #s(var accessors.remaining 22) #s(var v.lhs 7))))))))) #s(disj #s(== #s(var e.then 10) (quote 1)) #s(existential #s(var v.lhs 25) #s(existential #s(var accessors.rhs 26) #s(existential #s(var v.rhs 27) #s(existential #s(var e.then 28) #s(existential #s(var e.else 29) #s(conj #s(== #s(var e.then 10) (if (equal? (quote #s(var v.lhs 25)) (access . #s(var accessors.rhs 26))) #s(var e.then 28) #s(var e.else 29))) #s(disj #s(conj #s(conj #s(== #s(var v.lhs 25) #s(var v.rhs 27)) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var v 2) #s(var accessors.rhs 26) #s(var v.rhs 27)))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:program-evalo> program-evalo #s(var v 2) #s(var e.then 28) 1))) #s(conj #s(conj #s(=/= #s(var v.lhs 25) #s(var v.rhs 27)) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:accesso> accesso #s(var v 2) #s(var accessors.rhs 26) #s(var v.rhs 27)))) #s(relate #<procedure:...en/mk-syntax.rkt:5:15> (#<procedure:program-evalo> program-evalo #s(var v 2) #s(var e.else 29) 1))))))))))))))))))))";

int main(int i, char **s) {
  int x = 0;
  for (char q, r, /* is left-paren? is right-paren? */
            c,    /* character read from input */
            t,    /* last char was a paren-char */
            a=0;  /* indentation */
       x < strlen(ppstr) && ~(c = ppstr[x++]);
       t = q|r) {
         q = !!strchr(s[1],c);
    a -= r = !!strchr(s[2],c);
    for (i=0; t|q|r && i<2*a+1; putchar(i++? ' ' : '\n'));
    a += q;
    putchar(c);
  }
}